# profiles/slurm/config.yaml

executor: slurm

default-resources:
  - slurm_partition=medium
  - slurm_extra="--ntasks=1 --no-requeue"
    # slurm_partition in default-resources, as the name suggests, sets the default SLURM cluster partition for each job. Set to a partion with 12-24hrs time limit.
    # --ntasks: Specifies the number of MPI tasks (parallel processes) for SLURM to launch. Recommended to keep at 1.
    # --no-requeue: Prevents the job from being automatically requeued if it fails (clashes with the implemented snakemake retry memory scaling).
    # --signal=USR2@90: Sets up a signal to be sent to the job when it approaches its time limit (90 seconds).

# Job submission settings
jobs: 20                                      # Maximum number of cluster jobs Snakemake will have running or pending at once.
local-cores: 1                                # Number of CPU cores to use on the head/login node for Snakemakeâ€™s own internal tasks. Recommended to keep at 1).

# Status checking settings 
latency-wait: 120                             # Sets how long snakemake waits for output files after job completion (in seconds). Recommended for networked file systems.
seconds-between-status-checks: 60             # Interval between SLURM status queries (in seconds)
max-status-checks-per-second: 0.01            # Throttle rate of SLURM status polling. Prevents overwhelming cluster node running snakemake_run script.

